'$schema': 'http://json-schema.org/schema#'
'$id': 'http://schemata.hubmapconsortium.org/entity_metadata_schema.yml'
'title': 'entity metadata schema'
'description': 'entity metadata schema'

'allOf': [{'$ref': '#/definitions/entity_metadata'}]

'definitions':

  'entity_metadata':
     'type': 'object'
     'properties':
        'entity_type':
          'type': 'string'
          'enum': ['Upload', 'Dataset', 'Publication']
        'status':
          'type': 'string'
          'enum':
            - 'deprecated'
            - 'error'
            - 'hold'
            - 'valid'
            - 'invalid'
            - 'new'
            - 'processing'
            - 'published'
            - 'qa'
            - 'submitted'
            - 'error'
            - 'hold'
            - 'reorganized'
     'anyOf':
      - 'properties':
           'entity_type': { 'const': 'Upload' }
           'status':
             'anyOf':
               - {'const': 'error'}
               - {'const': 'invalid'}
               - {'const': 'new'}
               - {'const': 'processing'}
               - {'const': 'reorganized'}
               - {'const': 'submitted'}
               - {'const': 'valid'}
        'required': ['entity_type', 'status']
      - 'properties':
           'entity_type': { 'const': 'Dataset' }
           'status':
             'anyOf':
               - {'const': 'deprecated'}
               - {'const': 'error'}
               - {'const': 'hold'}
               - {'const': 'invalid'}
               - {'const': 'new'}
               - {'const': 'processing'}
               - {'const': 'published'}
               - {'const': 'qa'}
               - {'const': 'submitted'}
        'required': ['entity_type', 'status']
      - 'properties':
           'entity_type': { 'const': 'Publication' }
           'status':
             'anyOf':
               - {'const': 'error'}
               - {'const': 'hold'}
               - {'const': 'invalid'}
               - {'const': 'new'}
               - {'const': 'processing'}
               - {'const': 'published'}
               - {'const': 'qa'}
               - {'const': 'submitted'}
        'required': ['entity_type', 'status']
